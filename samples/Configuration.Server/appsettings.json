{
  "polymer": {
    "service": "samples.configuration",
    "logging": {
      "level": "Information",
      "overrides": {
        "OmniRelay.Transport": "Warning",
        "Microsoft": "Warning"
      }
    },
    "inbounds": {
      "http": [
        {
          "name": "http-sample",
          "urls": [ "http://127.0.0.1:7080" ]
        }
      ],
      "grpc": [
        {
          "name": "grpc-sample",
          "urls": [ "http://127.0.0.1:7090" ],
          "runtime": {
            "enableDetailedErrors": true
          },
          "telemetry": {
            "enableServerLogging": true
          }
        }
      ]
    },
    "outbounds": {
      "inventory": {
        "unary": {
          "grpc": [
            {
              "addresses": [ "http://127.0.0.1:10001" ],
              "remoteService": "inventory",
              "peerChooser": "two-random-choice"
            }
          ]
        }
      },
      "audit": {
        "oneway": {
          "custom": [
            {
              "spec": "audit-fanout",
              "url": "http://127.0.0.1:11000/yarpc/v1/audit::record",
              "headers": {
                "x-audit-shadow": "configuration-sample"
              }
            }
          ]
        }
      }
    },
    "middleware": {
      "inbound": {
        "unary": [ "OmniRelay.Samples.Configuration.RequestLoggingMiddleware, Configuration.Server" ],
        "oneway": [ "OmniRelay.Samples.Configuration.RequestLoggingMiddleware, Configuration.Server" ],
        "stream": [ "OmniRelay.Samples.Configuration.RequestLoggingMiddleware, Configuration.Server" ]
      }
    },
    "diagnostics": {
      "runtime": {
        "enableLoggingLevelToggle": true,
        "enableTraceSamplingToggle": true
      },
      "openTelemetry": {
        "enabled": true,
        "serviceName": "samples-configuration",
        "enableMetrics": true,
        "prometheus": {
          "enabled": true,
          "scrapeEndpointPath": "/omnirelay/metrics"
        }
      }
    },
    "encodings": {
      "json": {
        "profiles": {
          "camelCase": {
            "options": {
              "propertyNamingPolicy": "CamelCase",
              "writeIndented": true
            }
          }
        },
        "inbound": [
          {
            "procedure": "weather::current",
            "kind": "Unary",
            "requestType": "OmniRelay.Samples.Configuration.WeatherRequest, Configuration.Server",
            "responseType": "OmniRelay.Samples.Configuration.WeatherResponse, Configuration.Server",
            "encoding": "application/json",
            "profile": "camelCase"
          },
          {
            "procedure": "weather::stream",
            "kind": "Stream",
            "requestType": "OmniRelay.Samples.Configuration.WeatherStreamRequest, Configuration.Server",
            "responseType": "OmniRelay.Samples.Configuration.WeatherObservation, Configuration.Server",
            "encoding": "application/json",
            "profile": "camelCase"
          },
          {
            "procedure": "telemetry::ingest",
            "kind": "Oneway",
            "requestType": "OmniRelay.Samples.Configuration.TelemetryEvent, Configuration.Server",
            "encoding": "application/json",
            "profile": "camelCase"
          }
        ]
      }
    }
  }
}
